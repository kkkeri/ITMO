<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Magic Cities</title>
    <link rel="stylesheet" href="css/styles.css">
    <script defer src="js/cities.js"></script>
</head>
<body>

<header>
    <h1>Города (MagicCity)</h1>
</header>

<main>
    <!-- Кнопка создания -->
    <div style="margin-top: 10px;">
        <button class="primary" onclick="startCreateCity()">Создать новый город</button>
        <a href="creatures.html" style="margin-left: 10px;">⟵ к существам</a>
    </div>

    <!-- Таблица городов -->
    <table>
        <thead>
        <tr>
            <th>ID</th>
            <th>Название</th>
            <th>Площадь</th>
            <th>Население</th>
            <th>Столица</th>
            <th>Губернатор</th>
            <th>Плотность</th>
            <th>Действия</th>
        </tr>
        </thead>
        <tbody id="citiesTableBody">
        <!-- строки городов добавляет JS -->
        </tbody>
    </table>

    <!-- Форма создания / редактирования города -->
    <section id="cityEditSection" style="margin-top: 20px; display: none;">
        <h2 id="cityEditTitle">Новый город</h2>

        <div class="form-row">
            <label for="cityName">Название:</label>
            <input id="cityName" type="text">
        </div>

        <div class="form-row">
            <label for="cityArea">Площадь:</label>
            <input id="cityArea" type="number" min="1">
        </div>

        <div class="form-row">
            <label for="cityPopulation">Население:</label>
            <input id="cityPopulation" type="number" min="1">
        </div>

        <div class="form-row">
            <label for="cityCapital">Столица:</label>
            <input id="cityCapital" type="checkbox">
        </div>

        <div class="form-row">
            <label for="cityDensity">Плотность населения:</label>
            <input id="cityDensity" type="number" min="0.0001" step="0.0001">
        </div>

        <div class="form-row">
            <label for="cityGovernor">Губернатор (тип существа):</label>
            <select id="cityGovernor">
                <option value="">(нет)</option>
                <option value="HOBBIT">HOBBIT</option>
                <option value="ELF">ELF</option>
                <option value="HUMAN">HUMAN</option>
                <option value="GOLLUM">GOLLUM</option>
            </select>
        </div>

        <div style="margin-top: 10px;">
            <button class="primary" onclick="saveCity()">Сохранить</button>
            <button onclick="cancelCityEdit()">Отмена</button>
        </div>

        <div id="cityFormError" class="error" style="display: none;"></div>
    </section>

    <!-- Блок удаления с перепривязкой существ -->
    <section id="cityDeleteSection" style="margin-top: 20px; display: none;">
        <h2>Удаление города с перепривязкой существ</h2>

        <p>
            Вы удаляете город
            <strong id="deleteCityName"></strong>
            (ID: <span id="deleteCityIdDisplay"></span>).
        </p>

        <div class="form-row">
            <label for="reassignCitySelect">Перепривязать существ к городу:</label>
            <select id="reassignCitySelect">
                <!-- опции заполняет JS -->
            </select>
        </div>

        <div style="margin-top: 10px;">
            <button class="danger" onclick="confirmDeleteCity()">Удалить</button>
            <button onclick="cancelDeleteCity()">Отмена</button>
        </div>
    </section>

    <div id="cityGlobalError" class="error" style="display: none;"></div>
</main>

</body>
</html>